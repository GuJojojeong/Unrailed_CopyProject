# Unrailed_CopyProject
*나무를 부수고, 돌을 캐서 다리를 놓으세요, 기차가 영원히 달릴 수 있도록 선로를 생성하세요!*

 
## 🤗 프로젝트 소개
🥏 Unrailed_CopyProject는 기차게임 Unrailed를 기반으로 만든 공부용 카피게임입니다!


 멀티플레이를 통해 다른 친구들과 함께 기차게임을 즐겨보세요! (근데 플레이가......)

 
## 🕹 조작방식
상하좌우 이동키 - 이동
스페이스바 - 잡기
도구를 든 상태로 나무나 돌에 가까이 다가가면 자동으로 자원을 캡니다!

## 🎇 이런점이 특징입니다!
- 도구를 들고 나무와 돌을 캘 수 있습니다!
- 떨어진 나무와 돌을 기차에 가져다두면, 선로를 생성합니다!
- 선로를 설치해보세요! 선로는 설치하는 방향대로 회전합니다!
- 기차는 점점 빨라지고, 온도가 높아지면 더이상 가지 않습니다. 스테이지 클리어를 위해서 기차를 끝까지 보내세요!

***

## 🎫 프로젝트 개요
- 프로젝트 개발 기간 : 240619 ~ 240626 (총 7일)
- 개발 엔진 및 언어 : UNITY, C#
- 팀 이름 : 9조조정🗄

- [전체 코드 레포지토리]

## 🖥 팀 소개
|팀장|팀원|팀원|팀원|팀원|
|:---:|:---:|:---:|:---:|:---:|
|최지원|이영대|김보근|최관호|김창민|

## 역할분담 및 기능구현 목록
**최지원**
> 선로 시스템 및 맵 구현


**이영대**
> 플레이어 이동 및 멀티플레이 구현


**김보근**
> 플레이어 상호작용 및 자원/도구 구현


**최관호**
> 기차기능 구현 및 레일


**김창민**
> 특수기차칸 구현

## 🧨🧨 트러블 슈팅 🧨🧨

### 객체감지 및 하이라이트 관련 문제
플레이어가 정면을 바라볼 때, 객체가 제대로 감지되지 않거나 하이라이트가 제대로 표시되지 않았습니다.

**해결 방법**

1. IsWithinView 메소드에서 플레이어가 정면을 바라보고 있는지를 정확히 판단하는 로직을 추가하여 해결할 수 있습니다.
2. HighlightInteractable 메소드에서 감지된 객체 중 가장 가까운 객체를 선택하여 하이라이트를 적용하는 로직을 수정했습니다.

### 멀티플레이어 입력 동기화 및 카메라 타겟팅
멀티플레이어 환경에서 플레이어 입력이 올바르게 동기화되지 않음, 각 플레이어의 카메라가 올바른 플레이어를 타겟팅하지 않음.

**해결 방법**

1. ‘PhotonView.IsMine’ 조건을 추가하여 로컬 플레이어만 입력을 처리하도록 변경함으로써 입력 동기화 문제 해결.
2. 씬 전환 후 ‘SetCameraTargerAfterLoad’ 코루틴을 사용하여 로드가 완료된 후 플레이어 객체를 올바르게 타겟팅하도록 설정함으로써 카메라 문제 해결.

### 기차 이동로직 문제
처음 기차가 레일을 따라 움직이게 할때 동적으로 생성되는 레일의 콜라이더를 수집해 리스트에 넣는 방식을 사용했으나 , 수집 우선순위가 모호해 이상하게 움직이는 문제가 있었다.

**해결 방법**

1. RailManager 를 만들어 생성된 모든 레일을 순서대로 list에 넣어 관리했으며
2. 기차가 해당 레일을 지나가면 인덱스를 더해 다음 레일로 이동하게 만들었다. 그래서 순서대로 모든 레일을 밟고지나가게 만들었습니다.

### 제작된 선로의 위치문제
제작되는  선로들이 제작칸을 따라가지못하고 공중에 멈춰있는 문제가 발생

**해결 방법**

1. 선로를 RailBuilderCar의 자식으로 추가 / 선로를 RailBuilderCar의 자식으로 설정하여 기차와 함께 이동하게 함.
2. 선로의 위치를 적절히 설정 / 선로가 겹치지 않도록 yOffset을 사용하여 위치를 조정.

### 선로 회전
레일이 설치될 때 예전에 설치한 레일까지 회전시키는 문제.

**해결 방법**

1. 가장 마지막에 설치한 레일만 회전값이 변경되도록 메서드 생성.
2. 레일의 앞, 양 옆으로 보내던 레이를 상시 확인하는 것이 아닌 일시적으로 설치했을 때만 확인하도록 변경.
3. 이전에 설치한 레일은 더이상 건드리지 않도록 가장 마지막에 설치한 레일은 설치할때마다 업데이트
